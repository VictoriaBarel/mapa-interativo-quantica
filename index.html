<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Mapa Interativo do Brasil</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    svg, object {
      flex-shrink: 0;
      width: 600px;
      height: auto;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #fff;
    }
    path {
      fill: #ddd;
      stroke: #888;
      stroke-width: 1;
      cursor: pointer;
      transition: fill 0.2s;
    }
    path:hover {
      fill: #ffa500;
    }
    #painel-info {
      max-width: 400px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: none;
    }
    #painel-info img {
      width: 100%;
      border-radius: 8px;
    }
    .botoes {
      margin-top: 10px;
      text-align: center;
    }
    .botoes button {
      margin: 5px;
      padding: 6px 12px;
      border: none;
      background: #eee;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    .botoes button:hover {
      background: #ddd;
    }
    @media (max-width: 800px) {
      .container {
        flex-direction: column;
        align-items: center;
      }
      svg {
        width: 90vw;
      }
      #painel-info {
        width: 90vw;
      }
    }
  </style>
</head>
<body>
  <h1 style="text-align:center">Mapa Interativo do Brasil</h1>
  <p style="text-align:center">Clique em um estado para ver os cards das pesquisas.</p>

  <div class="container">
    <!-- SVG atualizado -->
    <object type="image/svg+xml" data="mapa_brasil_corrigido.svg" id="mapa-brasil" style="width:600px; max-width:90vw;"></object>

    <div id="painel-info">
      <h2 id="titulo-estado"></h2>
      <div id="conteudo-estado"></div>
      <div class="botoes" id="navegacao"></div>
    </div>
  </div>

  <script>
    const baseURL = "https://victoriabarel.github.io/mapa-interativo-quantica/";

    const dados = {
      al: { titulo: "Alagoas", imagens: ["al1.png"] },
      ba: { titulo: "Bahia", imagens: ["ba1.png"] },
      mt: { titulo: "Mato Grosso", imagens: ["mt1.png"] },
      go: { titulo: "Goiás", imagens: ["go1.png"] },
      mg: { titulo: "Minas Gerais", imagens: ["mg1.png", "mg2.png", "mg3.png", "mg4.png", "mg5.png"] },
      pe: { titulo: "Pernambuco", imagens: ["pe1.png", "pe2.png"] },
      rn: { titulo: "Rio Grande do Norte", imagens: ["rn1.png"] },
      sp: { titulo: "São Paulo", imagens: ["sp1.png", "sp2.png", "sp3.png", "sp4.png", "sp5.png", "sp6.png", "sp7.png", "sp8.png", "sp9.png", "sp10.png", "sp11.png", "sp12.png", "sp13.png"] },
      rj: { titulo: "Rio de Janeiro", imagens: ["rj1.png", "rj2.png", "rj3.png", "rj4.png", "rj5.png", "rj6.png", "rj7.png", "rj8.png"] },
      es: { titulo: "Espírito Santo", imagens: ["es1.png"] },
      pr: { titulo: "Paraná", imagens: ["pr1.png", "pr2.png", "pr3.png"] },
      sc: { titulo: "Santa Catarina", imagens: ["sc1.png"] },
      rs: { titulo: "Rio Grande do Sul", imagens: ["rs1.png"] },
    };

    let estadoAtual = null;
    let paginaAtual = 0;

    function mostrarPainel(id, pagina = 0) {
      const estado = dados[id];
      if (!estado) return;

      estadoAtual = id;
      paginaAtual = pagina;

      document.getElementById("titulo-estado").textContent = estado.titulo;
      document.getElementById("conteudo-estado").innerHTML = `
        <img src="${baseURL + estado.imagens[pagina]}" alt="${estado.titulo} - Card ${pagina + 1}">
      `;
      document.getElementById("painel-info").style.display = "block";

      const nav = document.getElementById("navegacao");
      nav.innerHTML = "";

      if (estado.imagens.length > 1) {
        const btnAnterior = document.createElement("button");
        btnAnterior.textContent = "⬅️";
        btnAnterior.disabled = paginaAtual === 0;
        btnAnterior.onclick = () => mostrarPainel(id, paginaAtual - 1);
        nav.appendChild(btnAnterior);

        const texto = document.createElement("span");
        texto.textContent = ` ${paginaAtual + 1} de ${estado.imagens.length} `;
        nav.appendChild(texto);

        const btnProximo = document.createElement("button");
        btnProximo.textContent = "➡️";
        btnProximo.disabled = paginaAtual >= estado.imagens.length - 1;
        btnProximo.onclick = () => mostrarPainel(id, paginaAtual + 1);
        nav.appendChild(btnProximo);
      }
    }

    document.getElementById("mapa-brasil").addEventListener("load", function() {
      const svgDoc = this.contentDocument;
      if (!svgDoc) return;

      Object.keys(dados).forEach(id => {
        const el = svgDoc.getElementById(id.toUpperCase());
        if (el) {
          el.style.cursor = "pointer";
          el.addEventListener("click", () => mostrarPainel(id));
        }
      });
    });
  </script>
</body>
</html>
